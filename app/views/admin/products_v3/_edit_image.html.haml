= render ModalComponent.new id: "#modal_edit_product_image_#{image.id}", instant: true do
  %h2= t(".title")

  %p= image_tag image.variant(:product)

  -# Submit to controller, because StimulusReflex doesn't support file uploads
  = form_for [:admin, product, image], url: admin_product_image_path(product, image),
      html: { multipart: true } do |f|
    %input{ type: :hidden, name: :return_url, value: return_url}
    = f.hidden_field :viewable_id, value: product.id

    %p
      -# label.button provides a handy shortcut to open the file selector on click. Unfortunately this trick isn't keyboard accessible though..
      = f.label :attachment, t(".upload"), class: "button primary icon-upload-alt"
      = f.file_field :attachment, style: "display: none"
      = f.submit # todo: submit automatically
